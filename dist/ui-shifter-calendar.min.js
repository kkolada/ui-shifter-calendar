!function(){"use strict";!function(){angular.module("UI.Shifter.Calendar",[])}(),angular.module("UI.Shifter.Calendar",["src/templates/ui-shifter-calendar.tpl.html"]),angular.module("src/templates/ui-shifter-calendar.tpl.html",[]).run(["$templateCache",function(a){a.put("src/templates/ui-shifter-calendar.tpl.html","<div class=ui-shifter-calendar><table ng-class=\"['ui-shifter-calendar-week-wrapper', {shadow: vm.shadow}]\"><thead><tr><th></th><th ng-if=vm.dayFilter.mon>Monday</th><th ng-if=vm.dayFilter.tue>Tuesday</th><th ng-if=vm.dayFilter.wed>Wednesday</th><th ng-if=vm.dayFilter.thu>Thursday</th><th ng-if=vm.dayFilter.fri>Friday</th><th ng-if=vm.dayFilter.sat>Saturday</th><th ng-if=vm.dayFilter.sun>Sunday</th></tr><tr class=subhead><th></th><th ng-if=vm.dayFilter.mon>Team</th><th ng-if=vm.dayFilter.tue>Team</th><th ng-if=vm.dayFilter.wed>Team</th><th ng-if=vm.dayFilter.thu>Team</th><th ng-if=vm.dayFilter.fri>Team</th><th ng-if=vm.dayFilter.sat>Team</th><th ng-if=vm.dayFilter.sun>Team</th></tr></thead><tbody><tr class=first-half-hour ng-repeat-start=\"hour in vm.hours track by $index\"><td id=\"{{vm.id + '-' + hour.time}}\">{{hour.time}}</td><td id=\"{{vm.id + '-' + hour.time + '-Monday'}}\" ng-if=vm.dayFilter.mon></td><td id=\"{{vm.id + '-' + hour.time + '-Tuesday'}}\" ng-if=vm.dayFilter.tue></td><td id=\"{{vm.id + '-' + hour.time + '-Wednesday'}}\" ng-if=vm.dayFilter.wed></td><td id=\"{{vm.id + '-' + hour.time + '-Thursday'}}\" ng-if=vm.dayFilter.thu></td><td id=\"{{vm.id + '-' + hour.time + '-Friday'}}\" ng-if=vm.dayFilter.fri></td><td id=\"{{vm.id + '-' + hour.time + '-Saturday'}}\" ng-if=vm.dayFilter.sat></td><td id=\"{{vm.id + '-' + hour.time + '-Sunday'}}\" ng-if=vm.dayFilter.sun></td></tr><tr class=second-half-hour ng-repeat-end><td>&nbsp;</td><td ng-if=vm.dayFilter.mon></td><td ng-if=vm.dayFilter.tue></td><td ng-if=vm.dayFilter.wed></td><td ng-if=vm.dayFilter.thu></td><td ng-if=vm.dayFilter.fri></td><td ng-if=vm.dayFilter.sat></td><td ng-if=vm.dayFilter.sun></td></tr></tbody></table></div>")}]),function(){function a(a,b,c,d){var e=this;e.hours=[];var f=function(a,b){for(var c=[],d=a;d<=b;d++)c.push({time:moment({hour:d,minute:0}).format("HH:mm")});e.hours=c},g=function(){h(),e.events.forEach(function(a){d.createEvent(e.id+"-"+a.from.substring(0,2)+":00-"+a.day,a,i(a.day,a.from))})},h=function(){for(var a=b[0].getElementsByClassName("shift");a.length>0;)a[0].parentNode.removeChild(a[0])},i=function(a,d){var f=b[0].getElementById(e.id+"-"+d.substring(0,2)+":00-"+a);if(null!==f)var g=f.getBoundingClientRect(),h=Math.round(g.top),i=Math.round(g.left),j=Math.round(g.width),k=Math.round(g.height);return{left:c.scrollX+i+3,top:c.scrollY+h+2,width:j,height:k}};a.$watch("vm.timeFilter",function(a,c){f(a.start,a.end),angular.element(b[0]).ready(function(){g()})},!0),a.$watch("vm.dayFilter",function(a,c){angular.element(b[0]).ready(function(){g()})},!0),a.$watch("vm.events",function(a,c){angular.element(b[0]).ready(function(){g()})},!0),angular.element(b[0]).ready(function(){g()})}angular.module("UI.Shifter.Calendar").controller("uiShifterCalendarCtrl",["$scope","$document","$window","uiShifterCalendarEvent",a])}(),function(){function a(a){}function b(){return{restrict:"AE",templateUrl:"src/templates/ui-shifter-calendar.tpl.html",controller:"uiShifterCalendarCtrl",controllerAs:"vm",scope:{id:"@",events:"=",timeFilter:"=",dayFilter:"=",shadow:"="},bindToController:!0,link:a}}angular.module("UI.Shifter.Calendar").directive("uiShifterCalendar",b)}(),function(){function a(a){function b(a,b){var c=a.substring(0,2),d=a.substring(3,5),e=b.substring(0,2),f=b.substring(3,5),g=moment({hour:c,minute:d});return moment({hour:e,minute:f}).diff(g,"minutes")}function c(a,c){var d=a.substring(0,2)+":00",e=b(d,a),f=0;if(e>0){var g=e%30,h=(e-g)/30,i=g/30;f=c*h+Math.round(c*i)-2}return f}function d(a,b){var c=a%30,d=(a-c)/30,e=c/30;return b*d+Math.round(b*e)-4}function e(a,b){var c=parseInt(b.substring(0,1)),d=parseInt(b.substring(2,3)),e=c/d;return Math.round(a*e)-5}var f={};return f.createEvent=function(f,g,h){var i=angular.element('<div class="shift"><span>'+g.fraction+"<br>"+g.from+"<br>"+g.to+"</span></div>"),j=d(b(g.from,g.to),h.height),k=e(h.width,g.fraction);j&&NaN!==j&&(i[0].style.height=j+"px"),k&&NaN!==k&&(i[0].style.width=k+"px");var l=h.left,m=h.top;m+=c(g.from,h.height),i[0].style.top=l+"px",i[0].style.top=m+"px";var n=a[0].getElementById(f);angular.element(n).append(i)},f}angular.module("UI.Shifter.Calendar").factory("uiShifterCalendarEvent",["$document",a])}()}();